{
	"name": "Temporal Go Development",
	"image": "mcr.microsoft.com/devcontainers/go:1-1.23-bullseye",
	
	"customizations": {
		"vscode": {
			"settings": {
				"go.toolsManagement.checkForUpdates": "local",
				"go.useLanguageServer": true,
				"terminal.integrated.defaultProfile.linux": "bash"
			},
			
			"extensions": [
				"golang.Go",
				"ms-vscode.vscode-json",
				"redhat.vscode-yaml",
				"ms-vscode.makefile-tools"
			]
		}
	},

	"forwardPorts": [8233],
	"portsAttributes": {
		"8233": {
			"label": "Temporal Dev Server & Web UI"
		}
	},

	"containerEnv": {
		"TEMPORAL_CLI_VERSION": "${localEnv:TEMPORAL_CLI_VERSION:1.4.1}"
	},

	"postCreateCommand": "curl -sSL https://github.com/temporalio/cli/releases/download/v${TEMPORAL_CLI_VERSION}/temporal_cli_${TEMPORAL_CLI_VERSION}_linux_$(dpkg --print-architecture).tar.gz | sudo tar -xz -C /usr/local/bin && go version && temporal --version && echo 'Ready! Run: temporal server start-dev'",

	"remoteUser": "vscode",
	
	"runArgs": [
		"--cap-add=SYS_PTRACE",
		"--security-opt", 
		"seccomp=unconfined",
		"--env-file", ".env"
	]
} 